<!DOCTYPE html>
<html lang="">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="stylesheet" href="/style/style.css">
<script>
    var NlviConfig = {
        title: "Mowayao's Blog",
        author: "Mowayao",
        theme: "banderole",
        lightbox: true,
        animate: true,
        baseUrl: "/",
        search: true,
        friends: false
    }
</script>



    <link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">









    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Mowayao's Blog">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />


  <meta name="subtitle" content="一往无前虎山行">




  <title>
  Mowayao's Blog
  
    | 一往无前虎山行
  
</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="progress">
  <div class="progress-inner"></div>
</div>
  
  
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
  <div class="tagcloud-inner">
    <a href="/tags/DP/" style="font-size: 14px;">DP</a> <a href="/tags/Deep-Learning/" style="font-size: 14px;">Deep Learning</a> <a href="/tags/GAN/" style="font-size: 14px;">GAN</a> <a href="/tags/Leetcode/" style="font-size: 14px;">Leetcode</a> <a href="/tags/RNN/" style="font-size: 14px;">RNN</a> <a href="/tags/algorithms/" style="font-size: 14px;">algorithms</a> <a href="/tags/classfication/" style="font-size: 14px;">classfication</a> <a href="/tags/classifcation/" style="font-size: 14px;">classifcation</a> <a href="/tags/classification/" style="font-size: 14px;">classification</a> <a href="/tags/computer-vision/" style="font-size: 14px;">computer vision</a> <a href="/tags/deep-learning/" style="font-size: 14px;">deep learning</a> <a href="/tags/detection/" style="font-size: 14px;">detection</a> <a href="/tags/face-detection/" style="font-size: 14px;">face detection</a> <a href="/tags/fine-grained-classification/" style="font-size: 14px;">fine-grained classification</a> <a href="/tags/leetcode/" style="font-size: 14px;">leetcode</a> <a href="/tags/machine-learning/" style="font-size: 14px;">machine learning</a> <a href="/tags/math/" style="font-size: 14px;">math</a> <a href="/tags/notes/" style="font-size: 14px;">notes</a> <a href="/tags/object-detection/" style="font-size: 14px;">object detection</a> <a href="/tags/paper/" style="font-size: 14px;">paper</a> <a href="/tags/paper-notes/" style="font-size: 14px;">paper notes</a> <a href="/tags/segmentation/" style="font-size: 14px;">segmentation</a> <a href="/tags/speech/" style="font-size: 14px;">speech</a> <a href="/tags/summary/" style="font-size: 14px;">summary</a> <a href="/tags/杂/" style="font-size: 14px;">杂</a>
  </div>
</div>  
  

  <div class="container">

    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn">
    <span><a href="/">Mowayao's Blog</a></span>
    
      <span id="subtitle">一往无前虎山行</span>
    
  </div>
</div>
    <nav class="main-nav">
        
  <ul class="main-nav-list syuanpi tvIn">
  
    <li class="menu-item">
      <a href="javascript:;" id="search">
        <span>Search</span>
        
          <span class="menu-item-label">search</span>
        
      </a>
    </li>
  
  
    
      
    
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">Article</span>
        
          <span class="menu-item-label">article</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">Archives</span>
        
          <span class="menu-item-label">archives</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">Tags</span>
        
          <span class="menu-item-label">tags</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="/about" id="about">
        <span class="base-name">About</span>
        
          <span class="menu-item-label">about</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="/atom.xml" id="RSS">
        <span class="base-name">RSS</span>
        
          <span class="menu-item-label">RSS</span>
        
      </a>
    </li>  
  
  </ul>
  
</nav>
    
    
  </div>
</header>
<div class="mobile-header">
  <div class="mobile-header-body">
    <div class="mobile-header-list">
      
        
            <div class="mobile-nav-item">
                <a href="/">
                    <span>Article</span>
                    
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/archives">
                    <span>Archives</span>
                    
                    
                </a>
            </div>
        
      
        
          <div class="mobile-nav-item inner-cloud">
            <div class="mobile-nav-tag">
              <a href="javascript:;" id="mobile-tags">
                <span>Tags</span>
                
                
              </a>
            </div>
            <div class="mobile-nav-tagcloud">
              <div class="mobile-tagcloud-inner">
                <a href="/tags/DP/" style="font-size: 14px;">DP</a> <a href="/tags/Deep-Learning/" style="font-size: 14px;">Deep Learning</a> <a href="/tags/GAN/" style="font-size: 14px;">GAN</a> <a href="/tags/Leetcode/" style="font-size: 14px;">Leetcode</a> <a href="/tags/RNN/" style="font-size: 14px;">RNN</a> <a href="/tags/algorithms/" style="font-size: 14px;">algorithms</a> <a href="/tags/classfication/" style="font-size: 14px;">classfication</a> <a href="/tags/classifcation/" style="font-size: 14px;">classifcation</a> <a href="/tags/classification/" style="font-size: 14px;">classification</a> <a href="/tags/computer-vision/" style="font-size: 14px;">computer vision</a> <a href="/tags/deep-learning/" style="font-size: 14px;">deep learning</a> <a href="/tags/detection/" style="font-size: 14px;">detection</a> <a href="/tags/face-detection/" style="font-size: 14px;">face detection</a> <a href="/tags/fine-grained-classification/" style="font-size: 14px;">fine-grained classification</a> <a href="/tags/leetcode/" style="font-size: 14px;">leetcode</a> <a href="/tags/machine-learning/" style="font-size: 14px;">machine learning</a> <a href="/tags/math/" style="font-size: 14px;">math</a> <a href="/tags/notes/" style="font-size: 14px;">notes</a> <a href="/tags/object-detection/" style="font-size: 14px;">object detection</a> <a href="/tags/paper/" style="font-size: 14px;">paper</a> <a href="/tags/paper-notes/" style="font-size: 14px;">paper notes</a> <a href="/tags/segmentation/" style="font-size: 14px;">segmentation</a> <a href="/tags/speech/" style="font-size: 14px;">speech</a> <a href="/tags/summary/" style="font-size: 14px;">summary</a> <a href="/tags/杂/" style="font-size: 14px;">杂</a>
              </div>
            </div>
          </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/about">
                    <span>About</span>
                    
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/atom.xml">
                    <span>RSS</span>
                    
                    
                </a>
            </div>
        
      
    </div>
  </div>
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <span class="header-menu-line"></span>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">Mowayao's Blog</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
</div>
    <div class="container-inner">
      <main class="main" id="main">
        <div class="main-wrapper">
          
  

<section class="posts">
  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-28</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/28/Weekly-Paper-Reading-2018-11-26/">Weekly Paper Reading(2018.11.26)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>Feedforward Sequential Memory Networks: A New Structure to Learn Long-term Dependency (FSMN)</h2>
<p><img src="https://i.loli.net/2018/11/28/5bfe346e3a2a7.png" alt="屏幕快照 2018-11-28 下午2.17.41.png"></p>
<p>从figure 1(a)看，如果没有紫色的虚线部分，和普通的DNN没有区别，区别在于加入了memory block。</p>
<p>memory block的结构件figure 1(b)。
$$
\tilde{\mathbf h}<em>t^l=\sum</em>{i=0}^{N}a_i^l\cdot \mathbf h_{t-i}^l
$$
N表示的是前N个历史，这里$a_i^l$是可以常数也可以是向量。如果是向量则表示为：
$$
\tilde{\mathbf h}<em>t^l=\sum</em>{i=0}^{N}\mathbf a_i^l\odot \mathbf h_{t-i}^l
$$
也可以表示成双向的：
$$
\tilde{\mathbf h}<em>t^l=\sum</em>{i=0}^{N_1}a_i^l\cdot \mathbf h_{t-i}^l+\sum_{j=1}^{N_2}c_j^l \cdot \mathbf h_{t+j}^l
$$</p>
<p>$$
\tilde{\mathbf h}<em>t^l=\sum</em>{i=0}^{N_1}\mathbf a_i^l\odot \mathbf h_{t-i}^l+\sum_{j=1}^{N_2}\mathbf c_j^l \odot \mathbf h_{t+j}^l
$$</p>
<p>通过memory block的计算，下一层可以表示为：
$$
\mathbf h_t^{l+1}=f(\mathbf W^l\mathbf h_t^l+\tilde{\mathbf w}^l\tilde{\mathbf h}_t^l+\mathbf b^l)
$$
a可以用attention module计算得到</p>
<h2>Compact Feedforward Sequential Memory Networks for Large Vocabulary Continuous Speech Recognition</h2>
<p><img src="https://i.loli.net/2018/11/28/5bfe3aa4c8be2.png" alt="屏幕快照 2018-11-28 下午2.50.53.png"></p>
<p>从figure 2看出，文章的思路就是将h映射到低维空间，然后再做memory block操作，再映射回去。</p>
<p>映射到低维空间
$$
\mathbf p_t^l=\mathbf V^l\mathbf h_t^l+\mathbf b^l
$$</p>
<p>$$
\mathbf{\tilde{p}}<em>t^l=\mathbf p_t^l + \sum</em>{i=0}^N\mathbf a_i^l \odot \mathbf p_{t-i}^l
$$</p>
<p>$$
\mathbf{\tilde{p}}<em>t^l=\mathbf p_t^l + \sum</em>{i=0}^{N_1}\mathbf a_i^l \odot \mathbf p_{t-i}^l+\sum_{j=0}^{N_2}\mathbf c_j^l \odot \mathbf p_{t+j}^l
$$</p>
<p>映射回到原来的空间
$$
\mathbf h_t^{l+1}=f(\mathbf U^l\mathbf{\tilde{p}}_t^l+\mathbf b^{l+1})
$$</p>
<h2>DEEP FEED-FORWARD SEQUENTIAL MEMORY NETWORKS FOR SPEECH SYNTHESIS</h2>
<p><img src="https://i.loli.net/2018/11/28/5bfe3d1f149ef.png" alt="屏幕快照 2018-11-28 下午3.01.26.png"></p>
<p>加入步长和skip-connection
$$
\mathbf{\tilde{p}}<em>t^l=\mathcal{H}(\mathbf{\tilde{p}}<em>t^{l-1}) + \mathbf{p}<em>t^l + \sum</em>{i=0}^{N_1}\mathbf a_i^l \odot \mathbf p</em>{t-s_1*i}^l+\sum</em>{j=0}^{N_2}\mathbf c_j^l \odot \mathbf p_{t+s_2*j}^l
$$</p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-23</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/23/Weekly-Paper-Reading-2018-11-19/">Weekly Paper Reading(2018.11.19)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>M2Det: A Single-Shot Object Detector based on Multi-Level Feature Pyramid Network</h2>
<p><a href="https://arxiv.org/abs/1811.04533" target="_blank" rel="external">Ref</a></p>
<p><a href="https://github.com/qijiezhao/M2Det" target="_blank" rel="external">Code</a></p>
<p><img src="https://i.loli.net/2018/11/23/5bf76ef6caac7.png" alt="屏幕快照 2018-11-23 上午11.02.15.png"></p>
<p>提出了multi-level feature pyramid network，每个level都是一个小的U-shape module，将每个level中相同scale的feature map合并来做不同scale的预测，合并用到SE attention的思想。以及需要尽可能地调大learning rate。</p>
<h2>ScratchDet: Exploring to Train Single-Shot Object Detectors from Scratch</h2>
<p><a href="https://arxiv.org/abs/1810.08425" target="_blank" rel="external">Ref</a></p>
<p><a href="https://github.com/KimSoybean/ScratchDet" target="_blank" rel="external">Code</a></p>
<p>文章探索了一些single shot object detectors train from scratch的一些技巧， 例如对于VGG来说，加入batch norm layer，对于ResNet取消第一层7x7的降采样，取而代之的是两个堆叠的3x3 conv。</p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-20</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/20/Weekly-Leetcode(2018-11-19)/">Weekly Leetcode (2018-11-19)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          
        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-20</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/20/Weekly-Leetcode/">Weekly Leetcode (2018-11-19)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>937. 重新排列日志文件</h2>
<p>你有一个日志数组 logs。每条日志都是以空格分隔的字串。</p>
<p>对于每条日志，其第一个字为字母数字标识符。然后，要么：</p>
<p>标识符后面的每个字将仅由小写字母组成，或；
标识符后面的每个字将仅由数字组成。
我们将这两种日志分别称为字母日志和数字日志。保证每个日志在其标识符后面至少有一个字。</p>
<p>将日志重新排序，使得所有字母日志都排在数字日志之前。字母日志按字母顺序排序，忽略标识符，标识符仅用于表示关系。数字日志应该按原来的顺序排列。</p>
<p>返回日志的最终顺序。</p>
<p>示例 ：</p>
<p>输入：[&quot;a1 9 2 3 1&quot;,&quot;g1 act car&quot;,&quot;zo4 4 7&quot;,&quot;ab1 off key dog&quot;,&quot;a8 act zoo&quot;]
输出：[&quot;g1 act car&quot;,&quot;a8 act zoo&quot;,&quot;ab1 off key dog&quot;,&quot;a1 9 2 3 1&quot;,&quot;zo4 4 7&quot;]</p>
<p>提示：</p>
<p>0 &lt;= logs.length &lt;= 100
3 &lt;= logs[i].length &lt;= 100
logs[i] 保证有一个标识符，并且标识符后面有一个字。</p>
<p><strong>Solution</strong></p>
<p>将logs分离，然后对字母的那部分排序，python搞定</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reorderLogFiles</span><span class="params">(self, logs)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        :type logs: List[str]</span></div><div class="line"><span class="string">        :rtype: List[str]</span></div><div class="line"><span class="string">        """</span></div><div class="line">        logs = map(<span class="keyword">lambda</span> x: x.split(), logs)</div><div class="line">        num_logs = filter(<span class="keyword">lambda</span> x: x[<span class="number">1</span>].isdigit(), logs)</div><div class="line">        alpha_logs = filter(<span class="keyword">lambda</span> x: x[<span class="number">1</span>].isalpha(), logs)</div><div class="line">        <span class="keyword">return</span> map(<span class="keyword">lambda</span> x: <span class="string">" "</span>.join(x), sorted(alpha_logs, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>:]) + num_logs)</div></pre></td></tr></table></figure></p>
<h2>938. 二叉搜索树的范围和</h2>
<p>给定二叉搜索树的根结点 root，返回 L 和 R（含）之间的所有结点的值的和。</p>
<p>二叉搜索树保证具有唯一的值。</p>
<p>示例 1：</p>
<p>输入：root = [10,5,15,3,7,null,18], L = 7, R = 15
输出：32
示例 2：</p>
<p>输入：root = [10,5,15,3,7,13,18,1,null,6], L = 6, R = 10
输出：23</p>
<p>提示：</p>
<p>树中的结点数量最多为 10000 个。
最终的答案保证小于 2^31。</p>
<p><strong>Solution</strong></p>
<p>DFS, 可以用BST的性质剪枝</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Definition for a binary tree node.</span></div><div class="line"><span class="comment"> * struct TreeNode &#123;</span></div><div class="line"><span class="comment"> *     int val;</span></div><div class="line"><span class="comment"> *     TreeNode *left;</span></div><div class="line"><span class="comment"> *     TreeNode *right;</span></div><div class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></div><div class="line"><span class="comment"> * &#125;;</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rangeSumBST</span><span class="params">(TreeNode* root, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> dfs(root, L, R);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(TreeNode* root, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (root-&gt;val &lt;= R &amp;&amp; root-&gt;val &gt;= L) cur = root-&gt;val;</div><div class="line">        <span class="keyword">if</span> (root-&gt;left!=<span class="literal">NULL</span> &amp;&amp; root-&gt;right!=<span class="literal">NULL</span>) &#123;</div><div class="line">            <span class="keyword">return</span> cur + dfs(root-&gt;left, L, R) + dfs(root-&gt;right, L, R);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt;left == <span class="literal">NULL</span> &amp;&amp; root-&gt;right != <span class="literal">NULL</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (R &lt; root-&gt;right-&gt;val) </div><div class="line">                <span class="keyword">return</span> cur;</div><div class="line">            <span class="keyword">else</span> </div><div class="line">                <span class="keyword">return</span> cur + dfs(root-&gt;right, L, R);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt;right == <span class="literal">NULL</span> &amp;&amp; root-&gt;left != <span class="literal">NULL</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (L &gt; root-&gt;left-&gt;val)</div><div class="line">                <span class="keyword">return</span> cur;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="keyword">return</span> cur+dfs(root-&gt;left, L, R);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> cur;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>939. 最小面积矩形</h2>
<p>给定在 xy 平面上的一组点，确定由这些点组成的矩形的最小面积，其中矩形的边平行于 x 轴和 y 轴。</p>
<p>如果没有任何矩形，就返回 0。</p>
<p>示例 1：</p>
<p>输入：[[1,1],[1,3],[3,1],[3,3],[2,2]]
输出：4
示例 2：</p>
<p>输入：[[1,1],[1,3],[3,1],[3,3],[4,1],[4,3]]
输出：2</p>
<p>提示：</p>
<p>1 &lt;= points.length &lt;= 500
0 &lt;= points[i][0] &lt;= 40000
0 &lt;= points[i][1] &lt;= 40000
所有的点都是不同的。</p>
<p><strong>Solution</strong></p>
<p>枚举右下角和左上角。</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minAreaRect</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points)</span> </span>&#123;</div><div class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">bool</span>&gt; flags;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> p: points) &#123;</div><div class="line">            flags[p[<span class="number">0</span>]*<span class="number">40001</span>+p[<span class="number">1</span>]] = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> n = points.size();</div><div class="line">        <span class="keyword">int</span> ret = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">int</span> x0 = points[i][<span class="number">0</span>], y0 = points[i][<span class="number">1</span>];</div><div class="line">                <span class="keyword">int</span> x1 = points[j][<span class="number">0</span>], y1 = points[j][<span class="number">1</span>];</div><div class="line">                <span class="keyword">if</span> (x0 == x1 || y0 == y1) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">if</span> (flags[x0*<span class="number">40001</span>+y1] &amp;&amp; flags[x1*<span class="number">40001</span>+y0]) &#123;</div><div class="line">                    ret = min(ret, <span class="built_in">abs</span>(x1-x0)*<span class="built_in">abs</span>(y1-y0));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (ret == INT_MAX) ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>940. 不同的子序列 II</h2>
<p>给定一个字符串 S，计算 S 的不同非空子序列的个数。</p>
<p>因为结果可能很大，所以返回答案模 10^9 + 7.</p>
<p>示例 1：</p>
<p>输入：&quot;abc&quot;
输出：7
解释：7 个不同的子序列分别是 &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;ab&quot;, &quot;ac&quot;, &quot;bc&quot;, 以及 &quot;abc&quot;。
示例 2：</p>
<p>输入：&quot;aba&quot;
输出：6
解释：6 个不同的子序列分别是 &quot;a&quot;, &quot;b&quot;, &quot;ab&quot;, &quot;ba&quot;, &quot;aa&quot; 以及 &quot;aba&quot;。
示例 3：</p>
<p>输入：&quot;aaa&quot;
输出：3
解释：3 个不同的子序列分别是 &quot;a&quot;, &quot;aa&quot; 以及 &quot;aaa&quot;。</p>
<p>提示：</p>
<p>S 只包含小写字母。
1 &lt;= S.length &lt;= 2000</p>
<p><strong>Solution</strong></p>
<p>$$dp(i) = \sum dp(j)$$</p>
<p>DP，dp(i)表示的是以i为结尾的方案数，遍历每个字符，迭代dp值，需要注意的是当i=j的时候，只需加1</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">distinctSubseqII</span><span class="params">(<span class="built_in">string</span> S)</span> </span>&#123;</div><div class="line">        ll dp[<span class="number">30</span>], tmp[<span class="number">30</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) </div><div class="line">            dp[i] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> len = S.size();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">int</span> cur = S[i] - <span class="string">'a'</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j++) &#123;</div><div class="line">                tmp[j] = dp[j];</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (j == cur) &#123;</div><div class="line">                    dp[cur] = (dp[cur] + <span class="number">1</span>) % MOD;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (tmp[j] != <span class="number">-1</span>) &#123;</div><div class="line">                     dp[cur] = (dp[cur] + tmp[j]) % MOD;</div><div class="line">                &#125;      </div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        ll ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (dp[i] != <span class="number">-1</span>)</div><div class="line">                ret = (ret + dp[i]) % MOD;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-04</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/04/Weekly-Leetcode-2018-11-3/">Weekly Leetcode(2018.11.3)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>933. 最近的请求次数</h2>
<p>写一个 RecentCounter 类来计算最近的请求。</p>
<p>它只有一个方法：ping(int t)，其中 t 代表以毫秒为单位的某个时间。</p>
<p>返回从 3000 毫秒前到现在的 ping 数。</p>
<p>任何处于 [t - 3000, t] 时间范围之内的 ping 都将会被计算在内，包括当前（指 t 时刻）的 ping。</p>
<p>保证每次对 ping 的调用都使用比之前更大的 t 值。</p>
<p>示例：</p>
<p>输入：inputs = [&quot;RecentCounter&quot;,&quot;ping&quot;,&quot;ping&quot;,&quot;ping&quot;,&quot;ping&quot;], inputs = [[],[1],[100],[3001],[3002]]
输出：[null,1,2,3,3]</p>
<p>提示：</p>
<p>每个测试用例最多调用 10000 次 ping。
每个测试用例会使用严格递增的 t 值来调用 ping。
每次调用 ping 都有 1 &lt;= t &lt;= 10^9。</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecentCounter</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.times = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">ping</span><span class="params">(self, t)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        :type t: int</span></div><div class="line"><span class="string">        :rtype: int</span></div><div class="line"><span class="string">        """</span></div><div class="line">        <span class="keyword">while</span> len(self.times) &gt; <span class="number">0</span> <span class="keyword">and</span> self.times[<span class="number">0</span>] + <span class="number">3000</span> &lt; t:</div><div class="line">            self.times = self.times[<span class="number">1</span>:]</div><div class="line">        self.times.append(t)</div><div class="line">        <span class="keyword">return</span> len(self.times)</div><div class="line">        </div><div class="line">        </div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Your RecentCounter object will be instantiated and called as such:</span></div><div class="line"><span class="comment"># obj = RecentCounter()</span></div><div class="line"><span class="comment"># param_1 = obj.ping(t)</span></div></pre></td></tr></table></figure></p>
<h2>934. 最短的桥</h2>
<p>在给定的二维二进制数组 A 中，存在两座岛。（岛是由四面相连的 1 形成的一个最大组。）</p>
<p>现在，我们可以将 0 变为 1，以使两座岛连接起来，变成一座岛。</p>
<p>返回必须翻转的 0 的最小数目。（可以保证答案至少是 1。）</p>
<p>示例 1：</p>
<p>输入：[[0,1],[1,0]]
输出：1
示例 2：</p>
<p>输入：[[0,1,0],[0,0,0],[0,0,1]]
输出：2
示例 3：</p>
<p>输入：[[1,1,1,1,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,0,1],[1,1,1,1,1]]
输出：1</p>
<p>提示：</p>
<p>1 &lt;= A.length = A[0].length &lt;= 100
A[i][j] == 0 或 A[i][j] == 1</p>
<p><strong>Solution</strong></p>
<p>分别求联通块，然后各自计算曼哈顿距离</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dirX[<span class="number">4</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dirY[<span class="number">4</span>] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestBridge</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; A)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = A.size();</div><div class="line">        <span class="keyword">int</span> cur = <span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (A[i][j] == <span class="number">1</span>) &#123;</div><div class="line">                    dfs(i, j, A, cur);</div><div class="line">                    cur++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; v1, v2;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (A[i][j] == <span class="number">2</span>) &#123;</div><div class="line">                    v1.push_back(make_pair(i, j));   </div><div class="line">                    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" !!! "</span> &lt;&lt; j &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(A[i][j] == <span class="number">3</span>)&#123;</div><div class="line">                    v2.push_back(make_pair(i, j));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ret = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v1.size(); i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; v2.size(); j++) &#123;</div><div class="line">                ret = min(ret, <span class="built_in">abs</span>(v1[i].first-v2[j].first)+<span class="built_in">abs</span>(v1[i].second-v2[j].second)<span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">            </div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; A, <span class="keyword">int</span> cur)</span> </span>&#123;</div><div class="line">        A[x][y] = cur;</div><div class="line">        <span class="keyword">int</span> n = A.size();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">            <span class="keyword">int</span> nx = x + dirX[i];</div><div class="line">            <span class="keyword">int</span> ny = y + dirY[i];</div><div class="line">            <span class="keyword">if</span> (nx &gt;= <span class="number">0</span> &amp;&amp; nx &lt; n &amp;&amp; ny &gt;= <span class="number">0</span> &amp;&amp; ny &lt; n &amp;&amp; A[nx][ny]==<span class="number">1</span>) &#123;</div><div class="line">                dfs(nx, ny, A, cur);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>935. 骑士拨号器</h2>
<p>国际象棋中的骑士可以按下图所示进行移动：</p>
<p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/11/03/keypad.png" alt=""></p>
<p>这一次，我们将 “骑士” 放在电话拨号盘的任意数字键（如上图所示）上，接下来，骑士将会跳 N-1 步。每一步必须是从一个数字键跳到另一个数字键。</p>
<p>每当它落在一个键上（包括骑士的初始位置），都会拨出键所对应的数字，总共按下 N 位数字。</p>
<p>你能用这种方式拨出多少个不同的号码？</p>
<p>因为答案可能很大，所以输出答案模 10^9 + 7。</p>
<p>示例 1：</p>
<p>输入：1
输出：10
示例 2：</p>
<p>输入：2
输出：20
示例 3：</p>
<p>输入：3
输出：46</p>
<p>提示：</p>
<p>1 &lt;= N &lt;= 5000</p>
<p><strong>Solution</strong></p>
<p>动态规划， dp</p>
<p>每个键位都有规定的可走的位置，从底向上递推即可</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">knightDialer</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; dp(<span class="number">10</span>, <span class="number">1</span>);</div><div class="line">        <span class="keyword">while</span> (--N &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; tp(<span class="number">10</span>, <span class="number">0</span>);</div><div class="line">            tp[<span class="number">0</span>] = (dp[<span class="number">4</span>] + dp[<span class="number">6</span>])%MOD;</div><div class="line">            tp[<span class="number">1</span>] = (dp[<span class="number">6</span>] + dp[<span class="number">8</span>])%MOD;</div><div class="line">            tp[<span class="number">2</span>] = (dp[<span class="number">7</span>] + dp[<span class="number">9</span>])%MOD;</div><div class="line">            tp[<span class="number">3</span>] = (dp[<span class="number">8</span>] + dp[<span class="number">4</span>])%MOD;</div><div class="line">            tp[<span class="number">4</span>] = (dp[<span class="number">3</span>] + dp[<span class="number">9</span>] + dp[<span class="number">0</span>])%MOD;</div><div class="line">            tp[<span class="number">6</span>] = (dp[<span class="number">1</span>] + dp[<span class="number">7</span>] + dp[<span class="number">0</span>])%MOD;</div><div class="line">            tp[<span class="number">7</span>] = (dp[<span class="number">6</span>] + dp[<span class="number">2</span>])%MOD;</div><div class="line">            tp[<span class="number">8</span>] = (dp[<span class="number">3</span>] + dp[<span class="number">1</span>])%MOD;</div><div class="line">            tp[<span class="number">9</span>] = (dp[<span class="number">2</span>] + dp[<span class="number">4</span>])%MOD;</div><div class="line">            dp = tp;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">            ans = (ans+dp[i])%MOD;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">   </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>936.戳印序列</h2>
<p>你想要用小写字母组成一个目标字符串 target。</p>
<p>开始的时候，序列由 target.length 个 '?' 记号组成。而你有一个小写字母印章 stamp。</p>
<p>在每个回合，你可以将印章放在序列上，并将序列中的每个字母替换为印章上的相应字母。你最多可以进行 10 * target.length  个回合。</p>
<p>举个例子，如果初始序列为 &quot;?????&quot;，而你的印章 stamp 是 &quot;abc&quot;，那么在第一回合，你可以得到 &quot;abc??&quot;、&quot;?abc?&quot;、&quot;??abc&quot;。（请注意，印章必须完全包含在序列的边界内才能盖下去。）</p>
<p>如果可以印出序列，那么返回一个数组，该数组由每个回合中被印下的最左边字母的索引组成。如果不能印出序列，就返回一个空数组。</p>
<p>例如，如果序列是 &quot;ababc&quot;，印章是 &quot;abc&quot;，那么我们就可以返回与操作 &quot;?????&quot; -&gt; &quot;abc??&quot; -&gt; &quot;ababc&quot; 相对应的答案 [0, 2]；</p>
<p>另外，如果可以印出序列，那么需要保证可以在 10 * target.length 个回合内完成。任何超过此数字的答案将不被接受。</p>
<p>示例 1：</p>
<p>输入：stamp = &quot;abc&quot;, target = &quot;ababc&quot;
输出：[0,2]
（[1,0,2] 以及其他一些可能的结果也将作为答案被接受）
示例 2：</p>
<p>输入：stamp = &quot;aabcaca&quot;, target = &quot;abca&quot;
输出：[3,0,1]</p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-11-03</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/11/03/Weekly-Paper-Review-2018-11-3/">Weekly Paper Review(2018.11.3)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>Audio Set classification with attention model: A probabilistic perspective</h2>
<p><a href="https://arxiv.org/abs/1711.00927" target="_blank" rel="external">Ref</a></p>
<p><a href="https://github.com/qiuqiangkong/ICASSP2018_audioset" target="_blank" rel="external">Code</a></p>
<p>Multiple instance learning(MIL): a bag consists of several instances, and a bag is labelled positive if at least one instances in the audio clip is positive
一个bag里有多个实例, 当包里至少有一个实例被标为正的时候, 整个包也会被标为正, 反之, 如果一个包要被标为负, 那么需要它的所有实例都为负.</p>
<p>对于MIL问题, 比较常用的解决方法有</p>
<ul>
<li>
<p>collective assumption, 通过假设所有的实例对最终的结果贡献相同, 所以采用的方法是对结果求平均.
However the collective assumption assumes all the instances inherit the label from its corresponding bag, which is not the same as the MIL assumption.
这句话不是很懂, 说的是这个assumption假设所有实例从对应的bag继承标签, 这和MIL assumption是有违背的?</p>
</li>
<li>
<p>maximum selection: 等价于深度学习中的global max pooling.
它的问题是在做BP的时候梯度不会传回给除了最大值意外的其他实例!</p>
</li>
<li>
<p>weighted collective assumption: 通过对每个实例加权得到最终的结果. 和attention不同的是, 它的w是不科学的</p>
</li>
</ul>
<p>文章提出了一个attention model来解决这个问题</p>
<p><a href="https://i.loli.net/2018/11/06/5be0fd956ee38.png" target="_blank" rel="external"><img src="https://i.loli.net/2018/11/06/5be0fd956ee38.png" alt="Screenshot from 2018-11-06 10-22-57.png"></a></p>
<h3>Audio Set Dataset</h3>
<p>AudioSet是一个大规模的声音片段的弱监督标签的数据集. 里面包含了2百万个10秒的音频片段, 共有527类. 本文使用在YouTUbe-100M数据集预训练好的VGGish提取embeeding特征. 该网络对每一秒的音频提取特征, 得到一个128维的向量, 所以10s的音频共有10段特征.</p>
<h3>Source Code</h3>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># Attention Lambda function</span></div><div class="line"></div><div class="line">lay_in = InputLayer(in_shape=(n_time, n_freq))</div><div class="line">a = Dense(n_out=n_hid, act=<span class="string">'relu'</span>)(lay_in)</div><div class="line">a = Dropout(p_drop=<span class="number">0.2</span>)(a)</div><div class="line">a = Dense(n_out=n_hid, act=<span class="string">'relu'</span>)(a)</div><div class="line">a = Dropout(p_drop=<span class="number">0.2</span>)(a)</div><div class="line">a = Dense(n_out=n_hid, act=<span class="string">'relu'</span>)(a)</div><div class="line">a = Dropout(p_drop=<span class="number">0.2</span>)(a)</div><div class="line">cla = Dense(n_out=n_out, act=<span class="string">'sigmoid'</span>, name=<span class="string">'cla'</span>)(a)</div><div class="line">att = Dense(n_out=n_out, act=<span class="string">'softmax'</span>, name=<span class="string">'att'</span>)(a)</div><div class="line"></div><div class="line"><span class="comment"># Attention</span></div><div class="line">lay_out = Lambda(_attention)([cla, att])</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_attention</span><span class="params">(inputs, **kwargs)</span>:</span></div><div class="line">    [cla, att] = inputs</div><div class="line">    _eps = <span class="number">1e-7</span></div><div class="line">    att = T.clip(att, _eps, <span class="number">1.</span> - _eps)</div><div class="line">    normalized_att = att / T.sum(att, axis=<span class="number">1</span>)[:, <span class="keyword">None</span>, :]</div><div class="line">    <span class="keyword">return</span> T.sum(cla * normalized_att, axis=<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<h2>Multi-level Attention Model for Weakly Supervised Audio Classification</h2>
<p><a href="http://arxiv.org/abs/1803.02353" target="_blank" rel="external">Ref</a></p>
<p><a href="https://github.com/ChangsongYu/Eusipco2018_Google_AudioSet" target="_blank" rel="external">Code</a></p>
<p>基于上一篇文章继续做改进, 提出Multi-level的attention model</p>
<p><a href="https://i.loli.net/2018/11/06/5be0ffd27a52c.png" target="_blank" rel="external"><img src="https://i.loli.net/2018/11/06/5be0ffd27a52c.png" alt="Screenshot from 2018-11-06 10-43-16.png"></a></p>
<p>总共包括三个attention module, 对于不同level的feature做attention, 然后再将各个attention module的结果concat再输出最后的结果.</p>
<h3>Source Code</h3>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">lay_in = Input(shape=(n_time, n_freq))</div><div class="line">a_0 = BatchNormalization()(lay_in)</div><div class="line">a_1 = Dense(n_hid)(a_0)</div><div class="line">a_1 = BatchNormalization()(a_1)</div><div class="line">a_1 = Activation(<span class="string">'relu'</span>)(a_1)</div><div class="line">a_1 = Dropout(rate=<span class="number">0.4</span>)(a_1)</div><div class="line">a_2 = Dense(n_hid)(a_1)</div><div class="line">a_2 = BatchNormalization()(a_2)</div><div class="line">a_2 = Activation(<span class="string">'relu'</span>)(a_2)</div><div class="line">a_2 = Dropout(rate=<span class="number">0.4</span>)(a_2)</div><div class="line">a_3 = Dense(n_hid)(a_2)</div><div class="line">a_3 = BatchNormalization()(a_3)</div><div class="line">a_3 = Activation(<span class="string">'relu'</span>)(a_3)</div><div class="line">a_3 = Dropout(rate=<span class="number">0.4</span>)(a_3)</div><div class="line">cla_1 = Dense(n_out, name=<span class="string">'cla_1'</span>)(a_3)</div><div class="line">cla_1 = BatchNormalization()(cla_1)</div><div class="line">cla_1 = Activation(<span class="string">'sigmoid'</span>)(cla_1)</div><div class="line">att_1 = Dense(n_out, name=<span class="string">'att_1'</span>)(a_3)</div><div class="line">att_1 = BatchNormalization()(att_1)</div><div class="line">att_1 = Activation(<span class="string">'softmax'</span>)(att_1)</div><div class="line"></div><div class="line"><span class="comment"># Attention</span></div><div class="line">lay_out_a = Lambda(_attention, output_shape=_att_output_shape)([cla_1, att_1])</div><div class="line">cla_2 = Dense(n_out, name=<span class="string">'cla_2'</span>)(a_2)</div><div class="line">cla_2 = BatchNormalization()(cla_2)</div><div class="line">cla_2 = Activation(<span class="string">'sigmoid'</span>)(cla_2)</div><div class="line">att_2 = Dense(n_out, name=<span class="string">'att2'</span>)(a_2)</div><div class="line">att_2 = BatchNormalization()(att_2)</div><div class="line">att_2 = Activation(<span class="string">'softmax'</span>)(att_2)</div><div class="line"></div><div class="line">lay_out_b = Lambda(_attention, output_shape=_att_output_shape)([cla_2, att_2])</div><div class="line">lay_out_c = Concatenate(axis=<span class="number">1</span>)([lay_out_a, lay_out_b]) </div><div class="line"></div><div class="line"><span class="comment">#lay_out = Dense(n_out, activation='sigmoid', name='output')(lay_out_c)</span></div><div class="line">lay_out = Dense(n_out, name=<span class="string">'output'</span>)(lay_out_c)</div><div class="line">lay_out = BatchNormalization()(lay_out)</div><div class="line">lay_out = Activation(<span class="string">'sigmoid'</span>)(lay_out)</div></pre></td></tr></table></figure></p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-10-28</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/10/28/Weekly-Leetcode-2018-10-28/">Weekly Leetcode(2018.10.28)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>929. 独特的电子邮件地址</h2>
<p>每封电子邮件都由一个本地名称和一个域名组成，以 @ 符号分隔。</p>
<p>例如，在 alice@leetcode.com中， alice 是本地名称，而 leetcode.com 是域名。</p>
<p>除了小写字母，这些电子邮件还可能包含 ',' 或 '+'。</p>
<p>如果在电子邮件地址的本地名称部分中的某些字符之间添加句点（'.'），则发往那里的邮件将会转发到本地名称中没有点的同一地址。例如，&quot;alice.z@leetcode.com” 和 “alicez@leetcode.com” 会转发到同一电子邮件地址。 （请注意，此规则不适用于域名。）</p>
<p>如果在本地名称中添加加号（'+'），则会忽略第一个加号后面的所有内容。这允许过滤某些电子邮件，例如 m.y+name@email.com 将转发到 my@email.com。 （同样，此规则不适用于域名。）</p>
<p>可以同时使用这两个规则。</p>
<p>给定电子邮件列表 emails，我们会向列表中的每个地址发送一封电子邮件。实际收到邮件的不同地址有多少？</p>
<p>示例：</p>
<p>输入：[&quot;test.email+alex@leetcode.com&quot;,&quot;test.e.mail+bob.cathy@leetcode.com&quot;,&quot;testemail+david@lee.tcode.com&quot;]
输出：2
解释：实际收到邮件的是 &quot;testemail@leetcode.com&quot; 和 &quot;testemail@lee.tcode.com&quot;。</p>
<p>提示：</p>
<p>1 &lt;= emails[i].length &lt;= 100
1 &lt;= emails.length &lt;= 100
每封 emails[i] 都包含有且仅有一个 '@' 字符。</p>
<p><strong>Solution</strong></p>
<p>python3一些内置函数就可以啦</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numUniqueEmails</span><span class="params">(self, emails)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        :type emails: List[str]</span></div><div class="line"><span class="string">        :rtype: int</span></div><div class="line"><span class="string">        """</span></div><div class="line">        cnt = <span class="number">0</span></div><div class="line">        vis = dict()</div><div class="line">        <span class="keyword">for</span> email <span class="keyword">in</span> emails:</div><div class="line">            adr, dom = email.split(<span class="string">'@'</span>)</div><div class="line">            tmp = <span class="string">""</span></div><div class="line">            <span class="keyword">if</span> <span class="string">'+'</span> <span class="keyword">in</span> adr:</div><div class="line">                adr = adr.split(<span class="string">'+'</span>)[<span class="number">0</span>]</div><div class="line">            tmp = reduce(<span class="keyword">lambda</span> x, y: x+y, adr.split(<span class="string">'.'</span>)) + <span class="string">'@'</span> + dom</div><div class="line">            <span class="keyword">if</span> tmp <span class="keyword">not</span> <span class="keyword">in</span> vis:</div><div class="line">                cnt += <span class="number">1</span></div><div class="line">                vis[tmp] = <span class="keyword">True</span></div><div class="line">            </div><div class="line">        <span class="keyword">return</span> cnt</div></pre></td></tr></table></figure></p>
<h2>930. 和相同的二元子数组</h2>
<p>在由若干 0 和 1  组成的数组 A 中，有多少个和为 S 的非空子数组。</p>
<p>示例：</p>
<p>输入：A = [1,0,1,0,1], S = 2
输出：4
解释：
如下面黑体所示，有 4 个满足题目要求的子数组：
[1,0,1,0,1]
[1,0,1,0,1]
[1,0,1,0,1]
[1,0,1,0,1]</p>
<p>提示：</p>
<p>A.length &lt;= 30000
0 &lt;= S &lt;= A.length
A[i] 为 0 或 1</p>
<p><strong>Solution</strong></p>
<p>计算一下前缀和，然后对于前缀和为s的位置，统计前缀和s-S的个数，对于S=0需要特判</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numSubarraysWithSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> S)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> pre = <span class="number">0</span>, ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (S == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i++) &#123;</div><div class="line">                <span class="keyword">if</span> (A[i] == <span class="number">1</span>) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">int</span> j = i;</div><div class="line">                <span class="keyword">while</span> (j+<span class="number">1</span> &lt; A.size() &amp;&amp; A[j+<span class="number">1</span>] == <span class="number">0</span>) j++;</div><div class="line">                <span class="keyword">int</span> num = j-i+<span class="number">1</span>;</div><div class="line">                ret += (num+<span class="number">1</span>)*num/<span class="number">2</span>;</div><div class="line">                i = j;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> ret;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; preS(A.size()+<span class="number">1</span>, <span class="number">0</span>);</div><div class="line">        </div><div class="line">        preS[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> a: A) &#123;</div><div class="line">            pre += a;</div><div class="line">            preS[pre]++;</div><div class="line">            <span class="keyword">if</span> (pre &gt;= S) &#123;</div><div class="line">                ret += preS[pre-S];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>931. 下降路径最小和</h2>
<p>给定一个方形整数数组 A，我们想要得到通过 A 的下降路径的最小和。</p>
<p>下降路径可以从第一行中的任何元素开始，并从每一行中选择一个元素。在下一行选择的元素和当前行所选元素最多相隔一列。</p>
<p>示例：</p>
<p>输入：[[1,2,3],[4,5,6],[7,8,9]]
输出：12
解释：
可能的下降路径有：
[1,4,7], [1,4,8], [1,5,7], [1,5,8], [1,5,9]
[2,4,7], [2,4,8], [2,5,7], [2,5,8], [2,5,9], [2,6,8], [2,6,9]
[3,5,7], [3,5,8], [3,5,9], [3,6,8], [3,6,9]
和最小的下降路径是 [1,4,7]，所以答案是 12。</p>
<p>提示：</p>
<p>1 &lt;= A.length == A[0].length &lt;= 100
-100 &lt;= A[i][j] &lt;= 100</p>
<p><strong>Solution</strong></p>
<p>比较简单的DP， 可以空间优化</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minFallingPathSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; A)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = A.size();</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(n, <span class="number">0</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            dp[i] = A[<span class="number">0</span>][i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp(n, INT_MAX);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</div><div class="line">                    tmp[j] = min(dp[j<span class="number">-1</span>]+A[i][j], tmp[j]);</div><div class="line">                &#125;</div><div class="line">                tmp[j] = min(dp[j]+A[i][j], tmp[j]);</div><div class="line">                <span class="keyword">if</span> (j+<span class="number">1</span> &lt; n) &#123;</div><div class="line">                    tmp[j] = min(dp[j+<span class="number">1</span>]+A[i][j], tmp[j]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                dp[j] = tmp[j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ret = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            ret = min(ret, dp[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>932. 漂亮数组</h2>
<p>对于某些固定的 N，如果数组 A 是整数 1, 2, ..., N 组成的排列，使得：</p>
<p>对于每个 i &lt; j，都不存在 k 满足 i &lt; k &lt; j 使得 A[k] * 2 = A[i] + A[j]。</p>
<p>那么数组 A 是漂亮数组。</p>
<p>给定 N，返回任意漂亮数组 A（保证存在一个）。</p>
<p>示例 1：</p>
<p>输入：4
输出：[2,1,4,3]
示例 2：</p>
<p>输入：5
输出：[3,1,2,5,4]</p>
<p>提示：</p>
<p>1 &lt;= N &lt;= 1000</p>
<p><strong>Solution</strong></p>
<p>递归，左边奇数，右边偶数。</p>
<p>1 2 3 =&gt; 1 3 2
1 2 3 4 5 =&gt; 1 3 5 2 4 =&gt; 1 5 3 2 4</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    </div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; beautifulArray(<span class="keyword">int</span> N) &#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</div><div class="line">        <span class="keyword">if</span> (N==<span class="number">1</span>) &#123;</div><div class="line">            ret.push_back(<span class="number">1</span>);</div><div class="line">            <span class="keyword">return</span> ret;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (N==<span class="number">2</span>) &#123;</div><div class="line">            ret.push_back(<span class="number">1</span>);</div><div class="line">            ret.push_back(<span class="number">2</span>);</div><div class="line">            <span class="keyword">return</span> ret;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (N&amp;<span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">int</span> mid = (N+<span class="number">1</span>)/<span class="number">2</span>;</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; left = beautifulArray(mid);</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; right = beautifulArray(mid<span class="number">-1</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; left.size(); i++) &#123;</div><div class="line">                ret.push_back(left[i]*<span class="number">2</span><span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; right.size(); i++) &#123;</div><div class="line">                ret.push_back(right[i]*<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> mid = N/<span class="number">2</span>;</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; left = beautifulArray(mid);</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; right = beautifulArray(mid);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; left.size(); i++) &#123;</div><div class="line">                ret.push_back(left[i]*<span class="number">2</span><span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; right.size(); i++) &#123;</div><div class="line">                ret.push_back(right[i]*<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-10-23</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/10/23/weekly-leetcode-2018-10-23/">Weekly Leetcode(2018.10.23)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2><a href="https://leetcode-cn.com/problems/long-pressed-name/" target="_blank" rel="external">925.长按键入</a></h2>
<p>你的朋友正在使用键盘输入他的名字 <code>name</code>。偶尔，在键入字符 <code>c</code> 时，按键可能会被<em>长按</em>，而字符可能被输入 1 次或多次。</p>
<p>你将会检查键盘输入的字符 <code>typed</code>。如果它对应的可能是你的朋友的名字（其中一些字符可能被长按），那么就返回 <code>True</code>。</p>
<p><strong>示例 1：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：name = &quot;alex&quot;, typed = &quot;aaleex&quot;</div><div class="line">输出：true</div><div class="line">解释：&apos;alex&apos; 中的 &apos;a&apos; 和 &apos;e&apos; 被长按。</div></pre></td></tr></table></figure></p>
<p><strong>示例 2：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：name = &quot;saeed&quot;, typed = &quot;ssaaedd&quot;</div><div class="line">输出：false</div><div class="line">解释：&apos;e&apos; 一定需要被键入两次，但在 typed 的输出中不是这样。</div></pre></td></tr></table></figure></p>
<p><strong>示例 3：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入：name = &quot;leelee&quot;, typed = &quot;lleeelee&quot;</div><div class="line">输出：true</div></pre></td></tr></table></figure></p>
<p><strong>示例 4：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：name = &quot;laiden&quot;, typed = &quot;laiden&quot;</div><div class="line">输出：true</div><div class="line">解释：长按名字中的字符并不是必要的。</div></pre></td></tr></table></figure></p>
<p><strong>提示：</strong></p>
<ol>
<li><code>name.length &lt;= 1000</code></li>
<li><code>typed.length &lt;= 1000</code></li>
<li><code>name</code> 和 <code>typed</code> 的字符都是小写字母。</li>
</ol>
<p><strong>solution</strong></p>
<p>各自统计下重复子串的大小，然后比对。</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isLongPressedName</span><span class="params">(<span class="built_in">string</span> name, <span class="built_in">string</span> typed)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (name.size() &gt; typed.size()) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt;&gt; cnt1, cnt2;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; typed.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> j = i;</div><div class="line">            <span class="keyword">while</span>(j+<span class="number">1</span> &lt; typed.size() &amp;&amp; typed[j+<span class="number">1</span>] == typed[i]) j++;</div><div class="line">            cnt1.push_back(make_pair(typed[i], j-i+<span class="number">1</span>));</div><div class="line">            i = j;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; name.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> j = i;</div><div class="line">            <span class="keyword">while</span>(j+<span class="number">1</span> &lt; name.size() &amp;&amp; name[j+<span class="number">1</span>] == name[i]) j++;</div><div class="line">            cnt2.push_back(make_pair(name[i], j-i+<span class="number">1</span>));</div><div class="line">            i = j;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (cnt1.size() != cnt2.size()) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cnt1.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (cnt1[i].first == cnt2[i].first &amp;&amp; cnt1[i].second &gt;= cnt2[i].second)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2><a href="https://leetcode-cn.com/problems/flip-string-to-monotone-increasing/" target="_blank" rel="external">926.将字符串翻转到单调递增</a></h2>
<p>如果一个由 <code>'0'</code> 和 <code>'1'</code> 组成的字符串，是以一些 <code>'0'</code>（可能没有 <code>'0'</code>）后面跟着一些 <code>'1'</code>（也可能没有 <code>'1'</code>）的形式组成的，那么该字符串是<em>单调递增</em>的。</p>
<p>我们给出一个由字符 <code>'0'</code> 和 <code>'1'</code> 组成的字符串 <code>S</code>，我们可以将任何 <code>'0'</code> 翻转为 <code>'1'</code> 或者将 <code>'1'</code> 翻转为 <code>'0'</code>。</p>
<p>返回使 <code>S</code> 单调递增的最小翻转次数。</p>
<p><strong>示例 1：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：&quot;00110&quot;</div><div class="line">输出：1</div><div class="line">解释：我们翻转最后一位得到 00111.</div></pre></td></tr></table></figure></p>
<p><strong>示例 2：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：&quot;010110&quot;</div><div class="line">输出：2</div><div class="line">解释：我们翻转得到 011111，或者是 000111。</div></pre></td></tr></table></figure></p>
<p><strong>示例 3：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">输入：&quot;00011000&quot;</div><div class="line">输出：2</div><div class="line">解释：我们翻转得到 00000000。</div></pre></td></tr></table></figure></p>
<p><strong>提示：</strong></p>
<ol>
<li><code>1 &lt;= S.length &lt;= 20000</code></li>
<li><code>S</code> 中只包含字符 <code>'0'</code> 和 <code>'1'</code></li>
</ol>
<p><strong>Solution</strong></p>
<p>计算前缀都变成0的代价和后缀都变成1的代价，相加即可</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minFlipsMonoIncr</span><span class="params">(<span class="built_in">string</span> S)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> Slen = S.size();</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pre(Slen+<span class="number">1</span>, <span class="number">0</span>), suf(Slen+<span class="number">2</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Slen; i++) &#123;</div><div class="line">            pre[i] = pre[i<span class="number">-1</span>];</div><div class="line">            <span class="keyword">if</span> (S[i<span class="number">-1</span>] == <span class="string">'1'</span>) &#123;</div><div class="line">                ++pre[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = Slen; i &gt;= <span class="number">1</span>; i--) &#123;</div><div class="line">            suf[i] = suf[i+<span class="number">1</span>];</div><div class="line">            <span class="keyword">if</span> (S[i<span class="number">-1</span>] == <span class="string">'0'</span>) &#123;</div><div class="line">                ++suf[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ret = min(pre[Slen], Slen-pre[Slen]);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Slen; i++) &#123;</div><div class="line">            ret = min(ret, pre[i<span class="number">-1</span>]+suf[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2><a href="https://leetcode-cn.com/problems/minimize-malware-spread-ii/" target="_blank" rel="external">928.尽量减少恶意软件的传播 II</a></h2>
<p>(这个问题与 <em>尽量减少恶意软件的传播</em> 是一样的，不同之处用粗体表示。)</p>
<p>在节点网络中，只有当 <code>graph[i][j] = 1</code> 时，每个节点 <code>i</code> 能够直接连接到另一个节点 <code>j</code>。</p>
<p>一些节点 <code>initial</code> 最初被恶意软件感染。只要两个节点直接连接，且其中至少一个节点受到恶意软件的感染，那么两个节点都将被恶意软件感染。这种恶意软件的传播将继续，直到没有更多的节点可以被这种方式感染。</p>
<p>假设 <code>M(initial)</code> 是在恶意软件停止传播之后，整个网络中感染恶意软件的最终节点数。</p>
<p>我们可以从初始列表中删除一个节点，**并完全移除该节点以及从该节点到任何其他节点的任何连接。**如果移除这一节点将最小化 <code>M(initial)</code>， 则返回该节点。如果有多个节点满足条件，就返回索引最小的节点。</p>
<p><strong>示例 1：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输出：graph = [[1,1,0],[1,1,0],[0,0,1]], initial = [0,1]</div><div class="line">输入：0</div></pre></td></tr></table></figure></p>
<p><strong>示例 2：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入：graph = [[1,1,0],[1,1,1],[0,1,1]], initial = [0,1]</div><div class="line">输出：1</div></pre></td></tr></table></figure></p>
<p><strong>示例 3：</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入：graph = [[1,1,0,0],[1,1,1,0],[0,1,1,1],[0,0,1,1]], initial = [0,1]</div><div class="line">输出：1</div></pre></td></tr></table></figure></p>
<p><strong>提示：</strong></p>
<ol>
<li><code>1 &lt; graph.length = graph[0].length &lt;= 300</code></li>
<li><code>0 &lt;= graph[i][j] == graph[j][i] &lt;= 1</code></li>
<li><code>graph[i][i] = 1</code></li>
<li><code>1 &lt;= initial.length &lt; graph.length</code></li>
<li><code>0 &lt;= initial[i] &lt; graph.length</code></li>
</ol>
<p><strong>Solution</strong></p>
<p>分别尝试去掉该节点，然后DFS统计污染的个数。</p>
<p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minMalwareSpread</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; graph, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; initial)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = graph.size();</div><div class="line">        <span class="keyword">int</span> len = initial.size();</div><div class="line">        <span class="keyword">int</span> ret = INT_MAX, idx = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">int</span> node = initial[i];</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp(n, <span class="number">0</span>);</div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; visited(n, <span class="literal">false</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                tmp[j] = graph[node][j];</div><div class="line">                graph[node][j] = <span class="number">0</span>;</div><div class="line">                graph[j][node] = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> s = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (initial[j] == node || visited[initial[j]]) &#123;</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                &#125;</div><div class="line">                visited[initial[j]] = <span class="literal">true</span>;</div><div class="line">                s += helper(initial[j], <span class="number">-1</span>, graph, visited);</div><div class="line">                </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (s &lt; ret) &#123;</div><div class="line">                ret = s;</div><div class="line">                idx = i;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (s == ret &amp;&amp; initial[idx] &gt; initial[i]) &#123;</div><div class="line">                idx = i;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                graph[node][j] = tmp[j];</div><div class="line">                graph[j][node] = tmp[j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> initial[idx];</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">helper</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; graph, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;&amp; visited)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> ret = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; graph[u].size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (graph[u][i] &amp;&amp; !visited[i] &amp;&amp; i != v &amp;&amp; i != u) &#123;</div><div class="line">                visited[i] = <span class="literal">true</span>;</div><div class="line">                ret += helper(i, u, graph, visited);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">        </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-10-23</span>
          
            
              <span class="post-category"><a href="/categories/algorithms/">algorithms</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/10/23/weekly-paper-review-2018-10-23/">Weekly Paper Review(2018.10.23)</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <h2>SNIPER: Efficient Multi-Scale Training</h2>
<ul>
<li>code: <a href="https://github.com/MahyarNajibi/SNIPER" target="_blank" rel="external">https://github.com/MahyarNajibi/SNIPER</a></li>
<li>paper: https://arxiv.org/abs/1805.09300</li>
</ul>
<h4>Idea</h4>
<p>这篇文章可以看作是<a href="https://arxiv.org/abs/1711.08189" target="_blank" rel="external">SNIP</a>和fast-rcnn的优化. SNIP的核心思想就是<strong>忽略大分辨率图中的大尺度物体, 小分辨率图中的小尺度物体</strong>.</p>
<p>文章开头重点分析了RCNN和fast RCNN的尺度不变性和计算性能. 首先, RCNN相较于fast RCNN具有较好的尺度不变形,这是因为它从图像中利用非监督的方法提取一些proposal, 然后再resize到224x224固定维度(CNNs能够对固定分辨率的图像进行分类),再放到网络中测试. 但是它引入了重复计算,效率较低. 而fast-RCNN为了消除计算瓶颈, 不同尺度大小的图像经过同一个CNN提取特征, 将proposal映射到高纬度的feature map,用固定维度的ROI pooled features作为每个region proposal的语义表示, 这样带来的问题就是破坏了RCNN的尺度不变特性. 但是也可以capture特征中的更多上下文信息.</p>
<h5>Chips</h5>
<p>文章提出了一个全新的多尺度训练方法, 采用尺度固定的chips作为输入从而保证尺度不变形, chips从图像金字塔中采样得到. 首先, 源码中采用了三个尺度, (3.0, 1.667, 512.0), 即将图像方法3倍, 1.67倍, 将小边固定为512, 保持比率resize. 然后再在图像中按照stride 32得到512x512的子图.</p>
<h6>positive chips的采样</h6>
<p>对于每个尺度, GT都有一个面积区间,</p>
<p>​							$$R^i=[r^i_{min},r^i_{max}]$$</p>
<p>, 对于三个尺度分别为: ((-1, 80), (32, 150), (120, -1)), 第一个-1表示的是0, 第二个-1表示的是无穷大, 将对应尺度的GT进行筛选. 作者贪心地选择chips使得尽可能多的GT被包含, 这里作者的策略是先计算每个chip包含的GT数量, 然后选择最多的5个, 需要注意的是再选择完当前个chip后,需要做后续操作, 即将这个chip包含的GT删除, 然后再选择最优的chip,不断重复. 得到固定尺度的子图512x512. 由于chip的分辨率较小, 大部分对检测没有用的背景都被消除了, 这对训练是非常有帮助的, 这样模型就更容易收敛!</p>
<h6>negative chips采样</h6>
<p>如果只使用正的chips训练, 虽然可以加快收敛速度, 但是会提高false positive rate,因为有用的负样本太少了!</p>
<p>所以作者提出使用训练了几个epoch的RPN来帮助生成negative chips. 具体的做法是使用RPN生成proposal, 去除GT, 剩下的几个proposal作为hard example, 然后选择所有至少包含M个proposal的chips, negative chips中不含有GT!</p>
<h6>Label Assignment</h6>
<p>这里说的是faster R-CNN是由RPN和fast R-CNN两部分组成的, RPN采用的全标签,即不对GT进行过滤晒除, 而fast R-CNN则是按照上文提到的策略进行选择GT.</p>
<p>整个模型的训练流程就是先通过chip generation生成positive chips和negative chips. 然后再放到RPN训练, 然后再选择proposal放到fast RCNN.</p>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
    
  
  <article class="
  post
  
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2018-06-01</span>
          
            
              <span class="post-category"><a href="/categories/competition/">competition</a></span>
            
          
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          <a href="/2018/06/01/Kaggle比赛小结-iMaterialist-Challenge-Furniture-at-FGVC5/">Kaggle比赛小结-iMaterialist Challenge (Furniture) at FGVC5</a>
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        
          <p>https://www.kaggle.com/c/imaterialist-challenge-furniture-2018</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1frw1y1wwhhj31fa02adg9.jpg" alt=""></p>
<p>参加完比赛，做个简单的总结：</p>
<ul>
<li>数据增强：random flip, color jitter, resize and crop</li>
<li>数据的不平衡需要设置采样权重(这个好像不一定能work)</li>
<li>网络模型，DenseNet201，SENet，InceptionResNetv2，SEResNext</li>
<li>Focal Loss不work</li>
<li>Adam or SGD</li>
<li>Multi-crop for testing</li>
<li>Ensemble: 取log后相加</li>
</ul>

        
      
    
    </div>
    
  </article>
  
   
    
  

  
</section>
  
  <nav class="pagination">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next ></a>
  </nav>


        </div>
      </main>

      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
    
    
    
    
    
    
    
    
        
        
        
        
            <a href="https://www.zhihu.com/people/https://www.zhihu.com/people/yao-ze-ping" class="iconfont icon-zhihu" title="zhihu"></a>
        
        
        
        
    
        
            <a href="https://github.com/https://github.com/mowayao" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2018 ~ 2018</span>
        <span>❤</span>
        <span>Mowayao</span>
    </div>
    <div class="theme">
        <span>
            Powered by
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            Theme
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>
    </div>
  </div>
</footer>
    </div>
  </div>
  <script src="/script/lib/jquery/jquery-3.2.1.min.js"></script>


    <script src="/script/lib/lightbox/js/lightbox.min.js"></script>



    <script src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({tex2jax: {inlineMath: [["$","$"], ["\\(","\\)"]]}});</script>



    
        <script src="/h.js"></script>
    
        <script src="/e.js"></script>
    
        <script src="/x.js"></script>
    
        <script src="/o.js"></script>
    
        <script src="/-.js"></script>
    
        <script src="/g.js"></script>
    
        <script src="/e.js"></script>
    
        <script src="/n.js"></script>
    
        <script src="/e.js"></script>
    
        <script src="/r.js"></script>
    
        <script src="/a.js"></script>
    
        <script src="/t.js"></script>
    
        <script src="/o.js"></script>
    
        <script src="/r.js"></script>
    
        <script src="/-.js"></script>
    
        <script src="/f.js"></script>
    
        <script src="/e.js"></script>
    
        <script src="/e.js"></script>
    
        <script src="/d.js"></script>
    


<script src="/script/src/nlvi.js"></script>
<script src="/script/src/utils.js"></script>
<script src="/script/scheme/balance.js"></script>
<script src="/script/src/plugins.js"></script>
<script src="/script/bootstarp.js"></script>


<div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>


  <div class="search" id="search">
    <div class="mask" id="mask"></div>
    <div class="search-wrapper syuanpi">
      <h2 id="search-header" class="syuanpi">搜索一下？</h2>
      <div class="input">
        <input type="text" id="local-search-input" results="0" name="">
      </div>
      <div id="local-search-result"></div>
    </div>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("MathJax config");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

</body>
</html>
